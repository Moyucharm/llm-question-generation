# Generation é¢˜ç›®ç”Ÿæˆé¡µé¢

é¢˜ç›®ç”Ÿæˆé¡µé¢æ˜¯ QGen åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼Œç”¨æˆ·åœ¨æ­¤é¡µé¢é…ç½®ç”Ÿæˆå‚æ•°å¹¶æäº¤ç”Ÿæˆè¯·æ±‚ï¼Œè·å¾—ä¸ªæ€§åŒ–çš„ AI ç”Ÿæˆè¯•å·ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
generation/
â”œâ”€â”€ components/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ GenerationForm.tsx  # ç”Ÿæˆè¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ GenerationPreview.tsx # ç”Ÿæˆé¢„è§ˆç»„ä»¶
â”‚   â”œâ”€â”€ PresetModal.tsx     # é¢„è®¾é€‰æ‹©æ¨¡æ€æ¡†
â”‚   â”œâ”€â”€ QuestionTypeSelector.tsx # é¢˜å‹é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ SavePresetModal.tsx # ä¿å­˜é¢„è®¾æ¨¡æ€æ¡†
â”‚   â””â”€â”€ index.ts            # ç»„ä»¶å¯¼å‡º
â”œâ”€â”€ constants/              # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ index.ts           # é¢˜å‹é€‰é¡¹é…ç½®
â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ useGenerationForm.ts # è¡¨å•çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ usePresetManager.ts  # é¢„è®¾ç®¡ç†
â”‚   â””â”€â”€ index.ts            # Hooks å¯¼å‡º
â””â”€â”€ index.tsx               # é¡µé¢ä¸»ç»„ä»¶
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½é¢˜ç›®ç”Ÿæˆ
- **AI é©±åŠ¨**: åŸºäºå¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆä¸ªæ€§åŒ–é¢˜ç›®
- **å¤šé¢˜å‹æ”¯æŒ**: æ”¯æŒ 6 ç§ä¸åŒç±»å‹çš„é¢˜ç›®
- **è‡ªå®šä¹‰é…ç½®**: çµæ´»çš„å‚æ•°é…ç½®å’Œæ•°é‡æ§åˆ¶
- **æµå¼ç”Ÿæˆ**: å®æ—¶æ˜¾ç¤ºç”Ÿæˆè¿›åº¦å’Œéƒ¨åˆ†å†…å®¹

### 2. é¢„è®¾æ–¹æ¡ˆç®¡ç†
- **å¿«é€Ÿé…ç½®**: ä¿å­˜å’ŒåŠ è½½å¸¸ç”¨çš„ç”Ÿæˆé…ç½®
- **æ–¹æ¡ˆåˆ†äº«**: æ”¯æŒé¢„è®¾æ–¹æ¡ˆçš„å¯¼å…¥å¯¼å‡º
- **æ™ºèƒ½å‘½å**: è‡ªåŠ¨ç”Ÿæˆé¢„è®¾æ–¹æ¡ˆåç§°
- **æ‰¹é‡ç®¡ç†**: é¢„è®¾æ–¹æ¡ˆçš„æ‰¹é‡æ“ä½œ

### 3. è¡¨å•éªŒè¯å’Œæäº¤
- **å®æ—¶éªŒè¯**: è¡¨å•å­—æ®µçš„å®æ—¶éªŒè¯åé¦ˆ
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¤„ç†æœºåˆ¶
- **çŠ¶æ€ç®¡ç†**: ç”Ÿæˆè¿‡ç¨‹çš„çŠ¶æ€è·Ÿè¸ª
- **ç”¨æˆ·ä½“éªŒ**: æµç•…çš„äº¤äº’å’ŒåŠ è½½çŠ¶æ€

## ğŸ“‹ ä¸»è¦ç»„ä»¶

### GenerationPage - ä¸»é¡µé¢ç»„ä»¶
- **æ–‡ä»¶**: `./index.tsx`
- **åŠŸèƒ½**: é¢˜ç›®ç”Ÿæˆçš„ä¸»é¡µé¢å®¹å™¨
- **ç‰¹æ€§**:
  - æ•´åˆè¡¨å•ã€é¢„è®¾ç®¡ç†å’Œç”Ÿæˆé€»è¾‘
  - å“åº”å¼å¸ƒå±€è®¾è®¡
  - çŠ¶æ€ç®¡ç†é›†æˆ
  - é”™è¯¯è¾¹ç•Œå¤„ç†

### GenerationForm - ç”Ÿæˆè¡¨å•
- **æ–‡ä»¶**: `./components/GenerationForm.tsx`
- **åŠŸèƒ½**: æ ¸å¿ƒçš„å‚æ•°é…ç½®è¡¨å•
- **åŒ…å«å­—æ®µ**:
  - å­¦ç§‘/ä¸»é¢˜è¾“å…¥
  - è¯¦ç»†æè¿°æ–‡æœ¬åŸŸ
  - é¢˜å‹é€‰æ‹©å’Œæ•°é‡é…ç½®
  - é¢„è®¾æ“ä½œæŒ‰é’®

### QuestionTypeSelector - é¢˜å‹é€‰æ‹©å™¨
- **æ–‡ä»¶**: `./components/QuestionTypeSelector.tsx`
- **åŠŸèƒ½**: é¢˜å‹é€‰æ‹©å’Œæ•°é‡é…ç½®
- **æ”¯æŒé¢˜å‹**:
  - å•é€‰é¢˜ (Single Choice)
  - å¤šé€‰é¢˜ (Multiple Choice)
  - å¡«ç©ºé¢˜ (Fill Blank)
  - ç®€ç­”é¢˜ (Short Answer)
  - ä»£ç è¾“å‡ºé¢˜ (Code Output)
  - ä»£ç ç¼–å†™é¢˜ (Code Writing)

### PresetModal - é¢„è®¾é€‰æ‹©æ¨¡æ€æ¡†
- **æ–‡ä»¶**: `./components/PresetModal.tsx`
- **åŠŸèƒ½**: é¢„è®¾æ–¹æ¡ˆçš„é€‰æ‹©å’Œç®¡ç†
- **ç‰¹æ€§**:
  - é¢„è®¾åˆ—è¡¨å±•ç¤º
  - é¢„è®¾è¯¦æƒ…é¢„è§ˆ
  - åº”ç”¨å’Œåˆ é™¤æ“ä½œ
  - æœç´¢å’Œç­›é€‰åŠŸèƒ½

### SavePresetModal - ä¿å­˜é¢„è®¾æ¨¡æ€æ¡†
- **æ–‡ä»¶**: `./components/SavePresetModal.tsx`
- **åŠŸèƒ½**: ä¿å­˜å½“å‰é…ç½®ä¸ºé¢„è®¾æ–¹æ¡ˆ
- **ç‰¹æ€§**:
  - é¢„è®¾åç§°å’Œæè¿°è¾“å…¥
  - é…ç½®ä¿¡æ¯é¢„è§ˆ
  - é‡å¤åç§°æ£€æŸ¥
  - ä¿å­˜ç¡®è®¤æµç¨‹

## ğŸ”§ è‡ªå®šä¹‰ Hooks

### useGenerationForm - è¡¨å•çŠ¶æ€ç®¡ç†
- **æ–‡ä»¶**: `./hooks/useGenerationForm.ts`
- **åŠŸèƒ½**: ç®¡ç†ç”Ÿæˆè¡¨å•çš„çŠ¶æ€å’Œæ“ä½œ
- **æä¾›æ–¹æ³•**:
  - `handleSubjectChange()` - å­¦ç§‘/ä¸»é¢˜å˜æ›´
  - `handleDescriptionChange()` - æè¿°å˜æ›´
  - `handleQuestionConfigChange()` - é¢˜å‹é…ç½®å˜æ›´
  - `getTotalQuestions()` - è·å–æ€»é¢˜ç›®æ•°
  - `getQuestionCount()` - è·å–æŒ‡å®šé¢˜å‹æ•°é‡

### usePresetManager - é¢„è®¾ç®¡ç†
- **æ–‡ä»¶**: `./hooks/usePresetManager.ts`
- **åŠŸèƒ½**: ç®¡ç†é¢„è®¾æ–¹æ¡ˆçš„åŠ è½½ã€ä¿å­˜å’Œåˆ é™¤
- **æä¾›æ–¹æ³•**:
  - `loadPresets()` - åŠ è½½é¢„è®¾åˆ—è¡¨
  - `applyPreset()` - åº”ç”¨é¢„è®¾æ–¹æ¡ˆ
  - `handleSavePreset()` - ä¿å­˜é¢„è®¾æ–¹æ¡ˆ
  - `confirmSavePreset()` - ç¡®è®¤ä¿å­˜æ“ä½œ
  - `handleDeletePreset()` - åˆ é™¤é¢„è®¾æ–¹æ¡ˆ

## âš™ï¸ é…ç½®å’Œå¸¸é‡

### é¢˜å‹é€‰é¡¹é…ç½®
- **æ–‡ä»¶**: `./constants/index.ts`
- **å†…å®¹**: QUESTION_TYPE_OPTIONS æ•°ç»„
- **åŒ…å«ä¿¡æ¯**:
  - é¢˜å‹ç±»å‹æ ‡è¯†
  - æ˜¾ç¤ºæ ‡ç­¾
  - åŠŸèƒ½æè¿°

```typescript
export const QUESTION_TYPE_OPTIONS = [
  { type: QuestionType.SINGLE_CHOICE, label: 'å•é€‰é¢˜', description: 'ä»å¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ' },
  { type: QuestionType.MULTIPLE_CHOICE, label: 'å¤šé€‰é¢˜', description: 'ä»å¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©å¤šä¸ªæ­£ç¡®ç­”æ¡ˆ' },
  // ... å…¶ä»–é¢˜å‹
];
```

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. é¡µé¢åˆå§‹åŒ–
```mermaid
graph TD
    A[é¡µé¢åŠ è½½] --> B[åˆå§‹åŒ–è¡¨å•çŠ¶æ€]
    B --> C[åŠ è½½é¢„è®¾åˆ—è¡¨]
    C --> D[æ¸²æŸ“è¡¨å•ç•Œé¢]
```

### 2. é…ç½®æµç¨‹
```mermaid
graph TD
    A[è¾“å…¥å­¦ç§‘ä¸»é¢˜] --> B[æ·»åŠ è¯¦ç»†æè¿°]
    B --> C[é€‰æ‹©é¢˜å‹å’Œæ•°é‡]
    C --> D[é¢„è§ˆé…ç½®ä¿¡æ¯]
    D --> E[æäº¤ç”Ÿæˆè¯·æ±‚]
```

### 3. é¢„è®¾ç®¡ç†æµç¨‹
```mermaid
graph TD
    A[é…ç½®å®Œæˆ] --> B[ä¿å­˜ä¸ºé¢„è®¾]
    B --> C[è¾“å…¥é¢„è®¾ä¿¡æ¯]
    C --> D[ç¡®è®¤ä¿å­˜]
    D --> E[æ›´æ–°é¢„è®¾åˆ—è¡¨]
    
    F[é€‰æ‹©é¢„è®¾] --> G[é¢„è§ˆé¢„è®¾è¯¦æƒ…]
    G --> H[åº”ç”¨é¢„è®¾é…ç½®]
    H --> I[æ›´æ–°è¡¨å•çŠ¶æ€]
```

## ğŸ¨ è®¾è®¡ç‰¹ç‚¹

### ç”¨æˆ·ä½“éªŒ
- **ç›´è§‚ç•Œé¢**: æ¸…æ™°çš„è¡¨å•å¸ƒå±€å’Œè§†è§‰å±‚æ¬¡
- **å®æ—¶åé¦ˆ**: å³æ—¶çš„éªŒè¯æç¤ºå’ŒçŠ¶æ€æ›´æ–°
- **å¿«é€Ÿé…ç½®**: é¢„è®¾æ–¹æ¡ˆçš„å¿«é€Ÿåº”ç”¨
- **å“åº”å¼**: é€‚é…ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸

### æŠ€æœ¯ç‰¹æ€§
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- **çŠ¶æ€ç®¡ç†**: åŸºäº Zustand çš„å“åº”å¼çŠ¶æ€
- **æ¨¡å—åŒ–**: ç»„ä»¶å’Œé€»è¾‘çš„æ¸…æ™°åˆ†ç¦»
- **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°çš„é¢˜å‹å’ŒåŠŸèƒ½

## ğŸ”— æ•°æ®æµ

### è¡¨å•æ•°æ®ç»“æ„
```typescript
interface GenerationRequest {
  subject: string;              // å­¦ç§‘/ä¸»é¢˜
  description: string;          // è¯¦ç»†æè¿°
  questionConfigs: Array<{      // é¢˜å‹é…ç½®
    type: QuestionType;
    count: number;
  }>;
}
```

### é¢„è®¾æ•°æ®ç»“æ„
```typescript
interface QuestionPreset {
  id: string;                   // é¢„è®¾ID
  name: string;                 // é¢„è®¾åç§°
  description?: string;         // é¢„è®¾æè¿°
  subject?: string;             // å­¦ç§‘/ä¸»é¢˜
  description_content?: string; // è¯¦ç»†æè¿°å†…å®¹
  questionConfigs: QuestionConfig[]; // é¢˜å‹é…ç½®
  createdAt: number;           // åˆ›å»ºæ—¶é—´
}
```

## ğŸ”— ç›¸å…³æ¨¡å—

- **çŠ¶æ€ç®¡ç†**: `../../stores/generation/` - ç”ŸæˆçŠ¶æ€ç®¡ç†
- **é¢˜ç›®ç»„ä»¶**: `../../components/Question/` - é¢˜ç›®æ¸²æŸ“ç»„ä»¶
- **ç±»å‹å®šä¹‰**: `../../types/` - å…±äº«ç±»å‹å®šä¹‰
- **å·¥å…·å‡½æ•°**: `../../utils/presetStorage.ts` - é¢„è®¾å­˜å‚¨å·¥å…·
- **LLM æœåŠ¡**: `../../llm/` - AI ç”ŸæˆæœåŠ¡

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…

- **ä½œè€…**: JacksonHe04
- **é¡¹ç›®**: QGen - AI æ™ºèƒ½åˆ·é¢˜ç³»ç»Ÿ
- **æ¨¡å—**: é¢˜ç›®ç”Ÿæˆæ ¸å¿ƒåŠŸèƒ½